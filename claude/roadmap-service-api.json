{"openapi":"3.0.1","info":{"title":"Roadmap Service API","description":"AI 기반 장기주거 로드맵 설계 및 관리 API","contact":{"name":"Home Starter Development Team","email":"dev@homestarter.com"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8086","description":"Local Development"},{"url":"{protocol}://{host}:{port}","description":"Custom Server","variables":{"protocol":{"description":"Protocol (http or https)","default":"http","enum":["http","https"]},"host":{"description":"Server host","default":"localhost"},"port":{"description":"Server port","default":"8086"}}}],"security":[{"Bearer Authentication":[]}],"tags":[{"name":"Roadmap","description":"장기주거 로드맵"},{"name":"LifecycleEvents","description":"생애주기 이벤트 관리"}],"paths":{"/roadmaps":{"get":{"tags":["Roadmap"],"summary":"장기주거 로드맵 조회","description":"생성된 장기주거 로드맵을 조회합니다","operationId":"getRoadmap","parameters":[{"name":"version","in":"query","description":"로드맵 버전 (미지정 시 최신 버전)","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapResponse"}}}},"404":{"description":"로드맵이 생성되지 않음","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapResponse"}}}},"200":{"description":"로드맵 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapResponse"}}}}}},"put":{"tags":["Roadmap"],"summary":"장기주거 로드맵 재설계","description":"변경된 정보를 반영하여 로드맵을 재설계합니다 (비동기 처리)","operationId":"updateRoadmap","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapTaskResponse"}}}},"202":{"description":"로드맵 재설계 요청 접수","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapTaskResponse"}}}},"404":{"description":"기존 로드맵이 없음","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapTaskResponse"}}}}}},"post":{"tags":["Roadmap"],"summary":"장기주거 로드맵 생성 요청","description":"AI를 활용하여 장기주거 로드맵을 생성합니다 (비동기 처리)","operationId":"createRoadmap","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapTaskResponse"}}}},"202":{"description":"로드맵 생성 요청 접수","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapTaskResponse"}}}},"400":{"description":"잘못된 요청 (최종목표 주택 미설정 등)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapTaskResponse"}}}}}}},"/lifecycle-events/{id}":{"get":{"tags":["LifecycleEvents"],"summary":"생애주기 이벤트 상세 조회","description":"특정 이벤트의 상세 정보를 조회합니다","operationId":"getLifecycleEvent","parameters":[{"name":"id","in":"path","description":"이벤트 ID","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"200":{"description":"이벤트 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"404":{"description":"이벤트를 찾을 수 없음","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}}}},"put":{"tags":["LifecycleEvents"],"summary":"생애주기 이벤트 수정","description":"이벤트 정보를 수정합니다","operationId":"updateLifecycleEvent","parameters":[{"name":"id","in":"path","description":"이벤트 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LifecycleEventRequest"}}},"required":true},"responses":{"200":{"description":"이벤트 수정 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"400":{"description":"잘못된 요청","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"404":{"description":"이벤트를 찾을 수 없음","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}}}},"delete":{"tags":["LifecycleEvents"],"summary":"생애주기 이벤트 삭제","description":"이벤트를 삭제합니다","operationId":"deleteLifecycleEvent","parameters":[{"name":"id","in":"path","description":"이벤트 ID","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"인증 실패"},"404":{"description":"이벤트를 찾을 수 없음"},"204":{"description":"이벤트 삭제 성공"}}}},"/lifecycle-events":{"get":{"tags":["LifecycleEvents"],"summary":"생애주기 이벤트 목록 조회","description":"등록된 모든 생애주기 이벤트를 조회합니다 (날짜순 정렬)","operationId":"getLifecycleEvents","parameters":[{"name":"eventType","in":"query","description":"이벤트 유형 필터","required":false,"schema":{"type":"string","enum":["MARRIAGE","BIRTH","CHILD_EDUCATION","RETIREMENT","OTHER"]}}],"responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventListResponse"}}}},"200":{"description":"이벤트 목록 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventListResponse"}}}}}},"post":{"tags":["LifecycleEvents"],"summary":"생애주기 이벤트 등록","description":"새로운 생애주기 이벤트를 등록합니다","operationId":"createLifecycleEvent","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LifecycleEventRequest"}}},"required":true},"responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"400":{"description":"잘못된 요청","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}},"201":{"description":"이벤트 등록 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LifecycleEventResponse"}}}}}}},"/roadmaps/versions":{"get":{"tags":["Roadmap"],"summary":"로드맵 버전 이력 조회","description":"저장된 로드맵 버전 목록을 조회합니다 (최대 3개)","operationId":"getRoadmapVersions","responses":{"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapVersionListResponse"}}}},"200":{"description":"버전 목록 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapVersionListResponse"}}}}}}},"/roadmaps/tasks/{taskId}/stream":{"get":{"tags":["Roadmap"],"summary":"로드맵 생성 진행 상황 스트리밍","description":"Server-Sent Events를 통해 실시간 진행 상황을 스트리밍합니다","operationId":"streamRoadmapProgress","parameters":[{"name":"taskId","in":"path","description":"작업 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"SSE 스트리밍 시작","content":{"text/event-stream":{"schema":{"$ref":"#/components/schemas/SseEmitter"}}}},"401":{"description":"인증 실패","content":{"text/event-stream":{"schema":{"$ref":"#/components/schemas/SseEmitter"}}}}}}},"/roadmaps/status/{requestId}":{"get":{"tags":["Roadmap"],"summary":"로드맵 생성/재설계 상태 조회","description":"비동기 로드맵 생성/재설계 요청의 처리 상태를 조회합니다","operationId":"getRoadmapStatus","parameters":[{"name":"requestId","in":"path","description":"로드맵 요청 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"상태 조회 성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapStatusResponse"}}}},"404":{"description":"요청을 찾을 수 없음","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapStatusResponse"}}}},"401":{"description":"인증 실패","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoadmapStatusResponse"}}}}}}}},"components":{"schemas":{"RoadmapTaskResponse":{"type":"object","properties":{"requestId":{"type":"string"},"status":{"type":"string","enum":["PENDING","PROCESSING","COMPLETED","FAILED"]},"progress":{"type":"integer","format":"int32"},"message":{"type":"string"},"estimatedCompletionTime":{"type":"integer","format":"int32"}}},"LifecycleEventRequest":{"required":["eventDate","eventType","name"],"type":"object","properties":{"name":{"maxLength":100,"minLength":0,"type":"string"},"eventType":{"type":"string","enum":["MARRIAGE","BIRTH","CHILD_EDUCATION","RETIREMENT","OTHER"]},"eventDate":{"pattern":"^\\d{4}-(0[1-9]|1[0-2])$","type":"string"},"housingCriteria":{"maxLength":200,"minLength":0,"type":"string"}}},"LifecycleEventResponse":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"name":{"type":"string"},"eventType":{"type":"string","enum":["MARRIAGE","BIRTH","CHILD_EDUCATION","RETIREMENT","OTHER"]},"eventDate":{"type":"string"},"housingCriteria":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"ExecutionGuideDto":{"type":"object","properties":{"monthlySavingsPlan":{"type":"array","items":{"$ref":"#/components/schemas/MonthlySavingsPlanDto"}},"warnings":{"type":"array","items":{"type":"string"}},"tips":{"type":"array","items":{"type":"string"}}}},"FinancialGoalsDto":{"type":"object","properties":{"targetSavings":{"type":"integer","format":"int64"},"monthlySavings":{"type":"integer","format":"int64"},"loanAmount":{"type":"integer","format":"int64"},"loanProduct":{"type":"string"}}},"GoalHousingDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"moveInDate":{"type":"string"},"price":{"type":"integer","format":"int64"}}},"HousingCharacteristicsDto":{"type":"object","properties":{"estimatedPrice":{"type":"integer","format":"int64"},"location":{"type":"string"},"type":{"type":"string"},"features":{"type":"array","items":{"type":"string"}}}},"MonthlySavingsPlanDto":{"type":"object","properties":{"period":{"type":"string"},"amount":{"type":"integer","format":"int64"},"purpose":{"type":"string"}}},"RoadmapResponse":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"version":{"type":"integer","format":"int32"},"status":{"type":"string","enum":["PROCESSING","COMPLETED","FAILED"]},"goalHousing":{"$ref":"#/components/schemas/GoalHousingDto"},"stages":{"type":"array","items":{"$ref":"#/components/schemas/RoadmapStageDto"}},"executionGuide":{"$ref":"#/components/schemas/ExecutionGuideDto"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"RoadmapStageDto":{"type":"object","properties":{"stageNumber":{"type":"integer","format":"int32"},"stageName":{"type":"string"},"moveInDate":{"type":"string"},"duration":{"type":"integer","format":"int32"},"housingCharacteristics":{"$ref":"#/components/schemas/HousingCharacteristicsDto"},"financialGoals":{"$ref":"#/components/schemas/FinancialGoalsDto"},"strategy":{"type":"string"},"tips":{"type":"array","items":{"type":"string"}}}},"RoadmapVersionInfo":{"type":"object","properties":{"version":{"type":"integer","format":"int32"},"createdAt":{"type":"string","format":"date-time"},"changeDescription":{"type":"string"}}},"RoadmapVersionListResponse":{"type":"object","properties":{"versions":{"type":"array","items":{"$ref":"#/components/schemas/RoadmapVersionInfo"}}}},"SseEmitter":{"type":"object","properties":{"timeout":{"type":"integer","format":"int64"}}},"RoadmapStatusResponse":{"type":"object","properties":{"requestId":{"type":"string"},"status":{"type":"string","enum":["PENDING","PROCESSING","COMPLETED","FAILED"]},"progress":{"type":"integer","format":"int32"},"message":{"type":"string"},"roadmapId":{"type":"string"},"error":{"type":"string"}}},"LifecycleEventListResponse":{"type":"object","properties":{"events":{"type":"array","items":{"$ref":"#/components/schemas/LifecycleEventResponse"}},"total":{"type":"integer","format":"int32"}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}