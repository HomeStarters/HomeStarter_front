# 내집마련 도우미 플랫폼 - 유저스토리

- [내집마련 도우미 플랫폼 - 유저스토리](#내집마련-도우미-플랫폼---유저스토리)
  - [마이크로서비스 구성](#마이크로서비스-구성)
  - [유저스토리](#유저스토리)
  - [기술 검토 결과](#기술-검토-결과)

---

## 마이크로서비스 구성
1. **User** - 사용자 인증 및 기본정보 관리
2. **Asset** - 본인/배우자 자산정보 관리
3. **Loan** - 대출상품 정보 관리
4. **Housing** - 입주희망 주택정보 관리
5. **Calculator** - 입주 후 지출 계산 및 대출 충족여부 판단
6. **Roadmap** - AI 기반 장기주거 로드맵 설계

---

## 유저스토리
```
1. User 서비스
1) 사용자 인증 및 관리
UFR-USER-010: [회원가입] 사용자로서 | 나는, 내집마련 계획을 관리하기 위해 | 간편하게 회원가입하고 싶다.
- 시나리오: 신규 회원가입
  미로그인 상태에서 회원가입 화면에 접근한 상황에서 | 필수 정보를 모두 입력하고 회원가입 버튼을 클릭하면 | 가입이 완료되고 로그인 화면으로 이동한다.

  [입력 요구사항]
  - 기본 정보
    - 이름: 2자 이상 (한글/영문)
    - 이메일: 이메일 형식 준수
    - 연락처: 휴대폰 번호 형식
    - 아이디: 5자 이상 영문/숫자 조합
    - 비밀번호: 8자 이상 (영문/숫자/특수문자 포함)
    - 비밀번호 확인: 비밀번호와 동일

  [검증 요구사항]
  - [ ] 실시간 입력 검증 (각 필드 포커스 아웃 시)
  - [ ] 아이디 중복 확인 (비동기)
  - [ ] 이메일 중복 확인 (비동기)
  - [ ] 비밀번호 강도 표시 (약함/보통/강함)
  - [ ] 모든 필수 항목 입력 확인
  - [ ] 이용약관 동의 여부 확인

  [처리 결과]
  - [ ] 성공 시: "회원가입이 완료되었습니다" 메시지 → 로그인 화면
  - [ ] 실패 시: 구체적인 오류 메시지 표시 (해당 필드 하단)

- M/8

---

UFR-USER-020: [로그인] 사용자로서 | 나는, 내집마련 계획을 관리하기 위해 | 간편하게 로그인하고 싶다.
- 시나리오 1: 사용자 로그인
  미로그인 상태에서 로그인 화면에 접근한 상황에서 | 아이디와 비밀번호를 입력하고 로그인 버튼을 클릭하면 | 인증이 완료되고 대시보드로 이동한다.

  [입력 요구사항]
  - [ ] 아이디: 등록된 아이디 입력
  - [ ] 비밀번호: 해당 계정의 비밀번호 입력
  - [ ] 로그인 유지: 선택 옵션 제공

  [인증 처리]
  - [ ] 성공: JWT 토큰 발급 및 대시보드로 즉시 이동
  - [ ] 실패: "아이디 또는 비밀번호를 확인해주세요" 메시지
  - [ ] 5회 연속 실패: 30분간 계정 잠금 안내

- 시나리오 2: 로그인 상태 유지 확인
  로그인 완료 후 대시보드에 접근한 상황에서 | 화면 상단 헤더를 확인하면 | 내 프로필 정보가 표시된다.

  [프로필 표시]
  - [ ] 사용자 아바타: 이름 첫 글자 원형 표시
  - [ ] 아바타 클릭 시 메뉴: 내 정보/프로필 편집/로그아웃

- M/5

---

UFR-USER-030: [로그아웃] 사용자로서 | 나는, 보안을 위해 | 서비스 사용 후 안전하게 로그아웃하고 싶다.
- 시나리오: 안전한 로그아웃
  로그인된 상태에서 프로필 메뉴의 로그아웃을 선택한 상황에서 | 로그아웃 확인 다이얼로그에서 확인을 클릭하면 | 세션이 종료되고 로그인 화면으로 이동한다.

  [로그아웃 처리]
  - [ ] 확인 다이얼로그: "로그아웃 하시겠습니까?" (취소/확인)
  - [ ] 확인 선택: JWT 토큰 삭제, 세션 종료, 로그인 화면 이동
  - [ ] 취소 선택: 다이얼로그 닫힘, 현재 화면 유지
  - [ ] 로그아웃 후 브라우저 뒤로가기 시 로그인 화면 유지

- S/3

---

2) 기본정보 관리
UFR-USER-040: [기본정보입력] 사용자로서 | 나는, 맞춤형 주거 추천을 받기 위해 | 나의 기본정보를 입력하고 싶다.
- 시나리오: 기본정보 입력
  로그인한 상태에서 기본정보 입력 화면에 접근한 상황에서 | 필수 정보를 입력하고 저장 버튼을 클릭하면 | 정보가 저장되고 자산정보 입력 화면으로 이동한다.

  [입력 항목]
  - 개인정보
    - [ ] 생년월일: 날짜 선택 (필수)
    - [ ] 성별: 남/여 선택 (필수)
  - 거주 및 직장정보
    - [ ] 현재 거주지: 주소 검색 (필수)
    - [ ] 본인 직장위치: 주소 검색 (필수)
    - [ ] 배우자 직장위치: 주소 검색 (선택)
  - 투자정보
    - [ ] 투자성향: 상/중/하 선택 (필수)

  [검증 요구사항]
  - [ ] 필수 항목 입력 확인
  - [ ] 주소 검색 API 연동 (카카오맵 등)
  - [ ] 실시간 입력 검증

  [처리 결과]
  - [ ] 성공: "기본정보가 저장되었습니다" → 자산정보 입력 화면
  - [ ] 실패: 오류 메시지 표시

- M/8

---

UFR-USER-050: [기본정보수정] 사용자로서 | 나는, 변경된 정보를 반영하기 위해 | 기본정보를 수정하고 싶다.
- 시나리오: 기본정보 수정
  기본정보가 입력된 상태에서 프로필 편집 화면에 접근한 상황에서 | 변경할 정보를 수정하고 저장 버튼을 클릭하면 | 변경사항이 저장되고 확인 메시지가 표시된다.

  [수정 가능 항목]
  - [ ] 현재 거주지
  - [ ] 본인 직장위치
  - [ ] 배우자 직장위치
  - [ ] 투자성향

  [제한 사항]
  - [ ] 생년월일, 성별은 수정 불가 (고객센터 문의)

  [처리 결과]
  - [ ] 저장 전 확인: "변경사항을 저장하시겠습니까?"
  - [ ] 저장 완료: "기본정보가 업데이트되었습니다"

- S/5

---

2. Asset 서비스
1) 자산정보 관리
UFR-ASST-010: [본인자산정보입력] 사용자로서 | 나는, 정확한 재무 계산을 위해 | 나의 자산정보를 입력하고 싶다.
- 시나리오: 본인 자산정보 입력
  기본정보 입력 완료 후 자산정보 입력 화면에 접근한 상황에서 | 자산, 대출, 월소득, 월지출 정보를 입력하고 저장 버튼을 클릭하면 | 정보가 저장되고 배우자 자산정보 입력 화면으로 이동한다.

  [입력 항목 - 복수 입력 가능]
  - 자산 관리
    - [ ] 자산 추가 버튼: 자산이름, 자산금액 입력 폼 표시
    - [ ] 자산 목록: 등록된 자산 카드 형태로 표시
    - [ ] 자산 수정/삭제: 각 카드에 편집/삭제 버튼
    - [ ] 총 자산액: 자동 계산 표시
  - 대출 관리
    - [ ] 대출 추가 버튼: 대출이름, 대출금액 입력 폼
    - [ ] 대출 목록: 등록된 대출 카드 형태로 표시
    - [ ] 대출 수정/삭제: 각 카드에 편집/삭제 버튼
    - [ ] 총 대출액: 자동 계산 표시
  - 월소득 관리
    - [ ] 월소득 추가 버튼: 소득이름, 소득금액 입력 폼
    - [ ] 월소득 목록: 등록된 소득 카드 형태로 표시
    - [ ] 월소득 수정/삭제: 각 카드에 편집/삭제 버튼
    - [ ] 총 월소득: 자동 계산 표시
  - 월지출 관리
    - [ ] 월지출 추가 버튼: 지출이름, 지출금액 입력 폼
    - [ ] 월지출 목록: 등록된 지출 카드 형태로 표시
    - [ ] 월지출 수정/삭제: 각 카드에 편집/삭제 버튼
    - [ ] 총 월지출: 자동 계산 표시

  [검증 요구사항]
  - [ ] 금액 형식 검증 (숫자, 콤마 자동 입력)
  - [ ] 최소 1개 이상의 자산 또는 소득 필수
  - [ ] 항목명 중복 체크

  [UI/UX 요구사항]
  - [ ] 드래그 앤 드롭으로 순서 변경 가능
  - [ ] 카드 선택 시 편집/삭제 버튼 표시
  - [ ] 자동 저장 기능 (3초 debounce)

- M/13

---

UFR-ASST-020: [배우자자산정보입력] 사용자로서 | 나는, 가구 전체 재무상태를 파악하기 위해 | 배우자의 자산정보를 입력하고 싶다.
- 시나리오: 배우자 자산정보 입력
  본인 자산정보 입력 완료 후 배우자 자산정보 입력 화면에 접근한 상황에서 | 배우자 정보를 입력하고 저장 버튼을 클릭하면 | 정보가 저장되고 대출상품 조회 화면으로 이동한다.

  [입력 항목]
  - [ ] UFR-ASST-010과 동일한 구조
  - [ ] 배우자 없음 체크박스: 선택 시 입력 건너뛰기

  [검증 요구사항]
  - [ ] 배우자 없음 선택 시: 모든 항목 0으로 자동 설정
  - [ ] 배우자 있음 선택 시: UFR-ASST-010과 동일한 검증

- M/13

---

UFR-ASST-030: [자산정보조회수정] 사용자로서 | 나는, 변경된 재무상태를 반영하기 위해 | 자산정보를 조회하고 수정하고 싶다.
- 시나리오: 자산정보 조회 및 수정
  로그인한 상태에서 자산정보 관리 화면 또는 대시보드 화면에 접근한 상황에서 | 본인/배우자 자산정보를 확인하고 수정하면 | 변경사항이 저장되고 확인 메시지가 표시된다.

  [조회 기능]
  - [ ] 본인/배우자 탭으로 구분
  - [ ] 카테고리별 목록 표시 (자산/대출/월소득/월지출)
  - [ ] 총액 자동 계산 표시
  - [ ] 재무 요약 정보 표시 (순자산, 월 가용자금 등)

  [수정 기능]
  - [ ] 항목 추가/수정/삭제
  - [ ] 실시간 총액 재계산
  - [ ] 변경 이력 표시 (최근 수정일시)

  [처리 결과]
  - [ ] 저장 성공: "자산정보가 업데이트되었습니다"
  - [ ] Calculator 서비스에 변경 이벤트 전달 (재계산 트리거)

- S/8

---

3. Loan 서비스
1) 대출상품 관리
UFR-LOAN-010: [대출상품목록조회] 사용자로서 | 나는, 이용 가능한 대출을 확인하기 위해 | 대출상품 목록을 조회하고 싶다.
- 시나리오: 대출상품 목록 조회
  로그인한 상태에서 대출상품 조회 화면에 접근한 상황에서 | 화면을 확인하면 | 이용 가능한 대출상품 목록이 카드 형태로 표시된다.

  [표시 정보]
  - 대출상품 카드
    - [ ] 대출이름 (예: 신혼부부 특별대출)
    - [ ] 대출한도 (예: 최대 3억원)
    - [ ] 금리 (예: 연 2.5%)
    - [ ] 대상주택 (예: 6억 이하 아파트)
    - [ ] 주요 자격요건 (간략)

  [필터/정렬 기능]
  - [ ] 대상주택 유형 필터 (전체/아파트/빌라/주택)
  - [ ] 금리순 정렬
  - [ ] 한도순 정렬
  - [ ] 검색 기능 (대출이름, 대상주택)

  [상호작용]
  - [ ] 카드 클릭: 대출상품 상세정보 화면 이동
  - [ ] 관심 대출 북마크 기능

- S/5

---

UFR-LOAN-020: [대출상품상세조회] 사용자로서 | 나는, 대출 자격요건을 상세히 확인하기 위해 | 대출상품 상세정보를 조회하고 싶다.
- 시나리오: 대출상품 상세정보 조회
  대출상품 목록에서 특정 상품 카드를 클릭한 상황에서 | 상세정보 화면으로 이동하면 | 대출상품의 모든 정보가 표시된다.

  [상세 정보]
  - 기본정보
    - [ ] 대출이름
    - [ ] 대출한도
    - [ ] LTV 한도 (예: 최대 70%)
    - [ ] DTI 한도 (예: 최대 60%)
    - [ ] DSR 한도 (예: 최대 40%)
    - [ ] 금리 (예: 연 2.5%)
  - 대상 및 자격요건
    - [ ] 대상주택 (예: 6억 이하 아파트)
    - [ ] 소득요건 (예: 부부합산 연소득 7천만원 이하)
    - [ ] 신청자요건 (예: 무주택자, 생애최초)
  - 추가정보
    - [ ] 비고 (특이사항)
    - [ ] 신청 방법 안내

  [기능]
  - [ ] 계산기 연동: "이 대출로 계산하기" 버튼
  - [ ] 북마크 추가/제거
  - [ ] 공유 기능

- C/5

---

AFR-LOAN-030: [대출상품관리] 관리자로서 | 나는, 최신 대출정보를 제공하기 위해 | 대출상품을 등록하고 관리하고 싶다.
- 시나리오 1: 대출상품 등록
  관리자 로그인 상태에서 대출상품 관리 화면에 접근한 상황에서 | 대출상품 정보를 입력하고 등록 버튼을 클릭하면 | 새로운 대출상품이 등록된다.

  [입력 항목]
  - [ ] 대출이름 (필수)
  - [ ] 대출한도 (필수)
  - [ ] LTV 한도 (필수, %)
  - [ ] DTI 한도 (필수, %)
  - [ ] DSR 한도 (필수, %)
  - [ ] 대상주택 (필수)
  - [ ] 소득요건 (선택)
  - [ ] 신청자요건 (선택)
  - [ ] 금리 (필수, %)
  - [ ] 비고 (선택)

- 시나리오 2: 대출상품 수정/삭제
  대출상품 목록에서 특정 상품을 선택한 상황에서 | 정보를 수정하거나 삭제하면 | 변경사항이 반영된다.

  [관리 기능]
  - [ ] 대출상품 목록 조회
  - [ ] 대출상품 수정
  - [ ] 대출상품 삭제 (사용 중인 경우 경고)
  - [ ] 대출상품 활성화/비활성화

- S/8

---

4. Housing 서비스
1) 입주희망 주택 관리
UFR-HOUS-010: [입주희망주택입력] 사용자로서 | 나는, 관심 주택을 등록하고 비교하기 위해 | 입주희망 주택정보를 입력하고 싶다.
- 시나리오: 입주희망 주택정보 입력
  자산정보 입력 완료 후 주택정보 입력 화면에 접근한 상황에서 | 주택 기본정보와 상세정보를 입력하고 저장하면 | 주택정보가 등록되고 목록에 추가된다.

  [기본정보]
  - [ ] 주택유형: 매매/전세/월세 선택 (필수)
  - [ ] 입주희망년월: 년월 선택 (필수)
  - [ ] 주택이름: 텍스트 입력 (필수, 최대 50자)
  - [ ] 위치: 주소 검색 (필수)
  - [ ] 준공년월: 년월 선택 (필수)
  - [ ] 가격: 금액 입력 (필수)
  - [ ] 타입: 텍스트 입력 (예: 84㎡) (필수)

  [교통정보 - 복수 입력 가능]
  - 교통호재 관리
    - [ ] 교통호재 추가 버튼
    - [ ] 교통호재명 입력 (예: 지하철 9호선)
    - [ ] 개통예정일 입력
    - [ ] 교통호재 목록 표시 (카드 형태)
    - [ ] 수정/삭제 버튼
  - 출퇴근 시간 관리 (교통호재별)
    - [ ] 본인 출퇴근 시간 (교통호재 개통 전): 분 단위 입력
    - [ ] 본인 출퇴근 시간 (교통호재 개통 후): 분 단위 입력
    - [ ] 배우자 출퇴근 시간 (교통호재 개통 전): 분 단위 입력
    - [ ] 배우자 출퇴근 시간 (교통호재 개통 후): 분 단위 입력

  [단지정보]
  - [ ] 단지 수: 숫자 입력 (예: 3개 단지)
  - [ ] 거래량: 텍스트 입력 (예: 월 평균 5건)

  [주거환경]
  - [ ] 주변환경: 텍스트 입력 (최대 200자)
  - [ ] 채광: 상/중/하 선택
  - [ ] 뷰: 텍스트 입력 (예: 한강뷰)
  - [ ] 주변소음: 상/중/하 선택
  - [ ] 비고: 텍스트 입력 (최대 500자)

  [검증 요구사항]
  - [ ] 필수 항목 입력 확인
  - [ ] 가격 형식 검증 (숫자, 콤마)
  - [ ] 입주희망년월 미래 날짜 확인
  - [ ] 주소 검색 API 연동

  [처리 결과]
  - [ ] 성공: "주택정보가 등록되었습니다" → 주택 목록 화면
  - [ ] 복수 등록 가능: "추가 등록" 버튼 제공

- M/21

---

UFR-HOUS-020: [입주희망주택목록조회] 사용자로서 | 나는, 등록한 주택들을 비교하기 위해 | 입주희망 주택 목록을 조회하고 싶다.
- 시나리오: 입주희망 주택 목록 조회
  로그인한 상태에서 주택 목록 화면 또는 대시보드 화면에 접근한 상황에서 | 화면을 확인하면 | 등록한 모든 주택이 카드 형태로 표시된다.

  [카드 표시 정보]
  - [ ] 주택이름
  - [ ] 주택유형 뱃지 (매매/전세/월세)
  - [ ] 위치 (간략 주소)
  - [ ] 가격
  - [ ] 입주희망년월
  - [ ] 타입
  - [ ] 최종목표 주택 표시 (별 아이콘)

  [필터/정렬 기능]
  - [ ] 주택유형 필터
  - [ ] 입주희망년월순 정렬
  - [ ] 가격순 정렬
  - [ ] 최근 등록순 정렬

  [상호작용]
  - [ ] 카드 클릭: 상세정보 화면 이동
  - [ ] 비교 선택: 최대 3개 주택 비교 기능
  - [ ] 최종목표 설정: 별 아이콘 클릭

- S/5

---

UFR-HOUS-030: [입주희망주택상세조회] 사용자로서 | 나는, 주택의 모든 정보를 확인하기 위해 | 입주희망 주택 상세정보를 조회하고 싶다.
- 시나리오: 입주희망 주택 상세정보 조회
  주택 목록에서 특정 주택 카드를 클릭한 상황에서 | 상세정보 화면으로 이동하면 | 주택의 모든 정보가 섹션별로 표시된다.

  [표시 정보]
  - 기본정보 섹션
    - [ ] 모든 기본정보 표시
  - 교통정보 섹션
    - [ ] 교통호재 목록 (카드 형태)
    - [ ] 각 교통호재별 출퇴근 시간 비교 테이블
  - 단지정보 섹션
    - [ ] 단지 수, 거래량
  - 주거환경 섹션
    - [ ] 주변환경, 채광, 뷰, 소음 정보
  - 재무정보 섹션
    - [ ] 계산된 입주 후 지출 정보 (있는 경우)

  [기능]
  - [ ] 수정 버튼: 주택정보 수정 화면 이동
  - [ ] 삭제 버튼: 삭제 확인 후 삭제
  - [ ] 최종목표 설정/해제 토글
  - [ ] 계산하기 버튼: Calculator 서비스 호출

- S/8

---

UFR-HOUS-040: [입주희망주택수정] 사용자로서 | 나는, 변경된 주택정보를 반영하기 위해 | 입주희망 주택정보를 수정하고 싶다.
- 시나리오: 입주희망 주택정보 수정
  주택 상세정보 화면에서 수정 버튼을 클릭한 상황에서 | 정보를 수정하고 저장하면 | 변경사항이 반영되고 상세정보 화면으로 돌아간다.

  [수정 가능 항목]
  - [ ] 모든 항목 수정 가능
  - [ ] UFR-HOUS-010과 동일한 입력 폼

  [검증 요구사항]
  - [ ] UFR-HOUS-010과 동일
  - [ ] 기존 계산 결과 무효화 안내

  [처리 결과]
  - [ ] 저장 성공: "주택정보가 업데이트되었습니다"
  - [ ] Calculator 서비스에 변경 이벤트 전달 (재계산 필요 표시)

- S/8

---

UFR-HOUS-050: [최종목표주택선택] 사용자로서 | 나는, 장기주거 로드맵의 목표를 설정하기 위해 | 최종목표 주택을 선택하고 싶다.
- 시나리오: 최종목표 주택 선택
  주택 목록 또는 상세정보 화면에서 별 아이콘을 클릭한 상황에서 | 확인 메시지에서 확인을 선택하면 | 해당 주택이 최종목표 주택으로 설정된다.

  [선택 처리]
  - [ ] 확인 다이얼로그: "이 주택을 최종목표로 설정하시겠습니까?"
  - [ ] 기존 최종목표 있는 경우: 기존 설정 해제 안내
  - [ ] 선택 완료: 별 아이콘 채워짐 (★)
  - [ ] 최종목표 주택 1개만 선택 가능

  [표시]
  - [ ] 주택 목록에서 최종목표 뱃지 표시
  - [ ] 상세정보에서 최종목표 표시

  [연동]
  - [ ] Roadmap 서비스에 최종목표 주택 정보 전달

- M/5

---

5. Calculator 서비스
1) 재무 계산
UFR-CALC-010: [입주후지출계산] 사용자로서 | 나는, 주택 구입 후 재무 상태를 예측하기 위해 | 입주 후 지출을 계산하고 싶다.
- 시나리오: 입주 후 지출 계산 요청
  주택 상세정보 화면에서 계산하기 버튼을 클릭한 상황에서 | 대출상품을 선택하고 계산 버튼을 클릭하면 | 계산 결과가 표시된다.

  [입력 데이터]
  - 자산정보 (Asset 서비스)
    - [ ] 본인/배우자 자산, 대출, 월소득, 월지출
  - 주택정보 (Housing 서비스)
    - [ ] 주택유형, 입주희망년월, 가격
  - 대출상품 (Loan 서비스)
    - [ ] 사용자 선택: 대출상품 선택 UI
    - [ ] 대출이름, 대출한도, LTV/DTI/DSR 한도, 금리

  [계산 로직]
  1. 입주희망년월 기준 예상자산 산출
     - [ ] 현재 자산 + (월소득 - 월지출) × 개월 수 - 현재 대출
  2. 대출필요 금액 산출
     - [ ] 주택가격 - 예상자산
  3. LTV/DTI/DSR 계산
     - [ ] LTV = (대출필요금액 / 주택가격) × 100
     - [ ] DTI = (연간대출원리금상환액 / 연소득) × 100
     - [ ] DSR = (연간총부채원리금상환액 / 연소득) × 100
  4. 대출상품 기준 충족여부 판단
     - [ ] 계산된 LTV/DTI/DSR vs 대출상품 한도
     - [ ] 대출한도 vs 대출필요금액
  5. 입주 후 예상자산/월지출 계산
     - [ ] 예상자산 - 대출필요금액 = 입주 후 자산
     - [ ] 월지출 + 월 대출상환액 = 입주 후 월지출

  [계산 결과 표시]
  - 재무 현황
    - [ ] 입주희망년월 기준 예상자산
    - [ ] 대출필요 금액
  - 대출 분석
    - [ ] 실행 대출이름
    - [ ] 계산된 LTV/DTI/DSR
    - [ ] 대출상품 기준 충족여부 (✅/❌)
    - [ ] 충족 시: "이 대출상품을 이용할 수 있습니다"
    - [ ] 미충족 시: "이 대출상품 기준을 충족하지 못합니다" + 상세 사유
  - 입주 후 재무상태
    - [ ] 예상 자산
    - [ ] 예상 월지출액
    - [ ] 여유자금 표시 (월소득 - 월지출)

  [기능]
  - [ ] 다른 대출상품으로 재계산
  - [ ] 계산 결과 저장
  - [ ] 계산 결과 공유

- M/21

- 기술 태스크
  - 재무 계산 API 구현
    - POST /calculator/housing-expenses (입주 후 지출 계산 요청)
    - GET /calculator/results/{id} (계산 결과 조회)
  - 복잡한 재무 계산식 구현
    - 예상자산 산출 로직
    - LTV/DTI/DSR 계산 공식
    - 대출상환액 계산 (원리금균등상환 방식)
    - 자격요건 검증 로직
  - Asset/Loan/Housing 서비스 연동
    - 필요 데이터 API 호출
    - 데이터 검증 및 변환
  - 계산 결과 저장
    - 계산 이력 관리
    - 결과 캐싱

---

UFR-CALC-020: [계산결과조회] 사용자로서 | 나는, 이전 계산 결과를 확인하기 위해 | 저장된 계산 결과를 조회하고 싶다.
- 시나리오: 계산 결과 목록 조회
  로그인한 상태에서 계산 결과 화면 또는 대시보드 화면에 접근한 상황에서 | 화면을 확인하면 | 저장된 모든 계산 결과가 목록으로 표시된다.

  [목록 표시]
  - [ ] 주택이름
  - [ ] 대출상품명
  - [ ] 계산일시
  - [ ] 충족여부 뱃지 (✅/❌)
  - [ ] 입주 후 여유자금

  [필터/정렬]
  - [ ] 주택별 필터
  - [ ] 최근 계산순 정렬
  - [ ] 충족여부 필터

  [상호작용]
  - [ ] 항목 클릭: 계산 결과 상세 화면
  - [ ] 재계산 버튼: 동일 조건으로 재계산
  - [ ] 삭제 버튼

- C/5

---

UFR-CALC-030: [계산결과상세 조회] 사용자로서 | 나는, 계산 상세 결과를 확인하기 위해 | 저장된 계산 상세 결과를 조회하고 싶다.
- 시나리오: 계산 결과 상세 조회
  계산결과 목록 화면에서 계산결과 카드를 클릭하면 | 계산 상세 결과가 표시된다.

  [계산 결과 표시]
  - 주택 이름
  - 재무 현황
    - [ ] 입주희망년월 기준 예상자산
    - [ ] 대출필요 금액
  - 대출 분석
    - [ ] 실행 대출이름
    - [ ] 실행 대출금액
    - [ ] 계산된 LTV/DTI/DSR
    - [ ] 대출상품 기준 충족여부 (✅/❌)
    - [ ] 충족 시: "이 대출상품을 이용할 수 있습니다"
    - [ ] 미충족 시: "이 대출상품 기준을 충족하지 못합니다" + 상세 사유
  - 입주 후 재무상태
    - [ ] 입주 후 예상 자산
    - [ ] 입주 후 예상 월지출액
    - [ ] 입주 후 월 여유자금 표시 (월소득 - 월지출)

- M/10

---

6. Roadmap 서비스
1) 장기주거 로드맵 설계
UFR-ROAD-010: [생애주기이벤트입력] 사용자로서 | 나는, 생애주기를 고려한 주거 계획을 세우기 위해 | 생애주기 이벤트를 입력하고 싶다.
- 시나리오: 생애주기 이벤트 입력
  로그인한 상태에서 생애주기 이벤트 관리 화면에 접근한 상황에서 | 이벤트를 추가하고 저장하면 | 이벤트가 등록된다.

  [이벤트 입력 - 복수 입력 가능]
  - [ ] 이벤트 추가 버튼
  - 이벤트 정보
    - [ ] 이벤트 이름: 텍스트 입력 (필수)
    - [ ] 이벤트 유형: 결혼/출산/자녀교육/은퇴/기타 선택
    - [ ] 이벤트 예정일: 년월 선택 (필수)
    - [ ] 주택선택 고려기준: 텍스트 입력 (최대 200자)
      - 예: 결혼 → "신혼집, 출퇴근 편리, 소형"
      - 예: 출산 → "학군 좋은 지역, 중대형"
      - 예: 자녀교육 → "명문학군, 대형"
      - 예: 은퇴 → "조용한 환경, 의료시설 근접"

  [이벤트 관리]
  - [ ] 이벤트 목록 표시 (타임라인 형태)
  - [ ] 이벤트 수정/삭제
  - [ ] 이벤트 순서 자동 정렬 (날짜순)

  [검증 요구사항]
  - [ ] 필수 항목 입력 확인
  - [ ] 이벤트 날짜 논리적 순서 확인 (출산 → 자녀교육)

- M/8

---

UFR-ROAD-020: [장기주거로드맵설계요청] 사용자로서 | 나는, AI가 제안하는 단계별 주거 계획을 받기 위해 | 장기주거 로드맵 설계를 요청하고 싶다.
- 시나리오: 장기주거 로드맵 설계 요청
  최종목표 주택과 생애주기 이벤트가 설정된 상황에서 | 로드맵 설계 버튼을 클릭하면 | AI가 단계별 주거 계획을 생성하고 결과가 표시된다.

  [입력 데이터]
  - [ ] 최종목표 주택 정보 (Housing 서비스)
  - [ ] 최종목표 주택 입주년월
  - [ ] 생애주기 이벤트 목록
  - [ ] 본인/배우자 자산정보 (Asset 서비스)
  - [ ] 기본정보 (User 서비스)
  - [ ] 입주 후 지출 계산 결과 (Calculator 서비스)

  [AI 분석 프로세스]
  1. 현재 재무상태 분석
     - [ ] 현재 자산, 소득, 지출 분석
  2. 최종목표 주택 분석
     - [ ] 필요 자금 규모
     - [ ] 입주 시기까지 기간
  3. 생애주기 이벤트 분석
     - [ ] 각 이벤트 시점별 주택 니즈 분석
     - [ ] 이벤트별 고려기준 반영
  4. 단계별 계획 수립
     - [ ] 현재 → 1단계 주택 → 2단계 주택 → ... → 최종목표 주택
     - [ ] 각 단계별 입주 시기
     - [ ] 각 단계별 주택 특징 (예상 가격, 위치, 타입)
     - [ ] 각 단계별 재무 목표 (저축액, 대출 규모)
  5. 실행가이드 생성
     - [ ] 월별 저축 목표
     - [ ] 단계별 이동 전략 (매매 → 전세 → 매매 등)
     - [ ] 대출 활용 전략
     - [ ] 리스크 관리 방안

  [로드맵 결과 표시]
  - 타임라인 뷰
    - [ ] 현재 시점부터 최종목표까지 시각화
    - [ ] 각 단계 카드 표시 (주택 정보, 재무 목표)
    - [ ] 생애주기 이벤트 마커 표시
  - 단계별 상세정보
    - [ ] 단계명 (예: 1단계 - 신혼집)
    - [ ] 예상 입주시기
    - [ ] 추천 주택 특징
    - [ ] 재무 목표 및 실행 전략
  - 실행가이드
    - [ ] 월별 저축 플랜
    - [ ] 주의사항 및 팁

  [AI 기술 태스크]
  - LLM 통합
    - Claude API 또는 GPT API 연동
    - 프롬프트 엔지니어링
      - 재무 분석 프롬프트
      - 생애주기 기반 주택 추천 프롬프트
      - 단계별 로드맵 생성 프롬프트
    - 응답 파싱 및 구조화
  - Calculator API 활용
    - 각 단계별 입주 후 지출 계산 호출
    - 재무 실현 가능성 검증
  - 데이터 통합
    - User/Asset/Housing/Loan 서비스 데이터 수집
    - AI 입력 형식으로 변환
  - 결과 검증
    - 재무 논리 검증 (저축 가능 여부)
    - 시기 논리 검증 (생애주기 이벤트 충돌)

- M/34

---

UFR-ROAD-030: [장기주거로드맵조회] 사용자로서 | 나는, 설계된 주거 계획을 확인하기 위해 | 장기주거 로드맵을 조회하고 싶다.
- 시나리오: 장기주거 로드맵 조회
  로그인한 상태에서 로드맵 화면에 접근한 상황에서 | 화면을 확인하면 | 설계된 로드맵이 타임라인과 상세정보로 표시된다.

  [타임라인 뷰]
  - [ ] 현재부터 최종목표까지 전체 타임라인
  - [ ] 단계별 카드 (주택 이름, 입주 시기, 가격)
  - [ ] 생애주기 이벤트 마커
  - [ ] 현재 위치 표시

  [단계별 상세정보]
  - [ ] 각 단계 클릭 시 상세 패널 표시
  - [ ] 추천 주택 특징
  - [ ] 재무 목표
  - [ ] 실행 전략

  [실행가이드]
  - [ ] 월별 저축 플랜
  - [ ] 현재 진행 상황 표시
  - [ ] 목표 대비 실제 현황 비교

  [기능]
  - [ ] 로드맵 수정 요청: 생애주기 이벤트 변경 후 재설계
  - [ ] 로드맵 공유: PDF/이미지 다운로드
  - [ ] 알림 설정: 단계별 목표 시기 알림

- S/8

---

UFR-ROAD-040: [장기주거로드맵수정] 사용자로서 | 나는, 변경된 상황을 반영하기 위해 | 장기주거 로드맵을 수정하고 싶다.
- 시나리오: 장기주거 로드맵 재설계
  로드맵 조회 화면에서 수정 버튼을 클릭한 상황에서 | 생애주기 이벤트나 최종목표 주택을 변경하고 재설계를 요청하면 | 새로운 로드맵이 생성된다.

  [수정 가능 항목]
  - [ ] 생애주기 이벤트 추가/수정/삭제
  - [ ] 최종목표 주택 변경
  - [ ] 자산정보 업데이트

  [재설계 프로세스]
  - [ ] 변경사항 확인 다이얼로그
  - [ ] AI 재분석 및 로드맵 생성
  - [ ] 기존 로드맵과 비교 뷰 제공
  - [ ] 변경사항 저장

  [이력 관리]
  - [ ] 이전 로드맵 버전 저장 (최대 3개)
  - [ ] 버전별 비교 기능

- S/13

---
```

## 기술 검토 결과
**[마이크로서비스별 검토]**
1) User 서비스
모든 유저스토리 **✅ 실현 가능**
- 표준적인 인증/인가 패턴
- JWT 토큰, 세션 관리 등 검증된 기술 활용

2) Asset 서비스
모든 유저스토리 **✅ 실현 가능**
- 복수 항목 관리: 1:N 관계 DB 모델링
- CRUD 작업의 복잡도는 중간 수준
- 자동 저장 기능 (LocalStorage + 서버 동기화)

3) Loan 서비스
모든 유저스토리 **✅ 실현 가능**
- 기본 CRUD 작업
- 관리자 기능 추가
- 검색/필터링 기능

4) Housing 서비스
대부분 **✅ 실현 가능**
- 복수 항목 관리 (교통호재, 출퇴근 시간)
- 복잡한 데이터 구조 (중첩 관계)
- 주소 검색 API 연동 필요

5) Calculator 서비스
**⚠️ 복잡한 재무 계산 로직**
- LTV/DTI/DSR 계산식 정확도 중요
- 입주희망년월 기준 예상자산 산출 로직
- 대출상환액 계산 (원리금균등상환)
- 여러 서비스의 데이터 통합 필요
- **해결방안**: 재무 전문가 검증, 단위 테스트 철저히

6) Roadmap 서비스 (AI)
**⚠️ 가장 높은 기술적 복잡도**

- UFR-ROAD-020: **주요 리스크 포인트**
  - LLM API 응답 시간 관리 (비동기 처리)
  - 프롬프트 엔지니어링 품질
  - 다중 서비스 데이터 통합
  - AI 결과의 신뢰성 검증
  - **해결방안**:
    - 비동기 처리 + 진행 상황 표시
    - 프롬프트 반복 테스트 및 최적화
    - 결과 검증 로직 (재무 논리, 시기 논리)
    - 사용자 피드백 수집 및 개선

**[주요 기술 스택 권장사항]**

**백엔드:**
- Node.js/Spring Boot (마이크로서비스)
- PostgreSQL/MySQL (관계형 데이터)
- Redis (캐싱, 세션)
- RabbitMQ/Kafka (비동기 처리 - AI 로드맵 생성)

**프론트엔드:**
- React/Next.js
- TypeScript
- Zustand/Redux (상태관리)
- React Query (API 상태관리)
- react-beautiful-dnd (드래그앤드롭)

**AI/LLM:**
- Claude API / GPT-4 API
- 프롬프트 체인 관리
- 응답 파싱 라이브러리

**인프라:**
- Docker/Kubernetes
- API Gateway
- Circuit Breaker (외부 API 장애 대응)
- 로드 밸런서

**[주요 기술적 리스크 및 해결방안]**

**1. 복잡한 재무 계산 정확도**
- 리스크: LTV/DTI/DSR 계산 오류 시 사용자 의사결정 왜곡
- 해결방안:
  - 재무 전문가 검증
  - 철저한 단위 테스트 (경계값, 예외 케이스)
  - 계산 공식 문서화 및 검증 프로세스
  - 사용자 대상 베타 테스트

**2. AI 로드맵 생성 시간 및 품질**
- 리스크: LLM 응답 시간 길어질 수 있음, 결과 품질 불안정
- 해결방안:
  - 비동기 처리 + SSE/WebSocket으로 진행 상황 전달
  - 프롬프트 최적화 (명확한 지시, 구조화된 출력)
  - Few-shot 학습 예시 제공
  - 결과 검증 로직 (논리적 모순 체크)
  - 사용자 피드백 루프 (개선 반영)

**3. 다중 서비스 데이터 일관성**
- 리스크: Asset/Housing/Calculator/Roadmap 간 데이터 동기화 문제
- 해결방안:
  - 이벤트 기반 아키텍처 (데이터 변경 시 이벤트 발행)
  - 데이터 변경 시 영향받는 서비스 알림
  - 캐싱 전략 (일관성 vs 성능 균형)
  - API Gateway를 통한 트랜잭션 관리

**4. 복수 항목 관리 UI/UX 복잡도**
- 리스크: 자산, 교통호재 등 복수 항목 관리의 사용자 경험
- 해결방안:
  - 직관적인 카드 UI 디자인
  - 드래그 앤 드롭 라이브러리 활용
  - 자동 저장 (사용자 편의성)
  - 명확한 시각적 피드백
  - 사용성 테스트 반복

**5. 주소 검색 API 의존성**
- 리스크: 카카오맵 등 외부 API 장애 시 서비스 영향
- 해결방안:
  - 써킷 브레이커 패턴 적용
  - API 응답 캐싱
  - 수동 입력 대체 옵션 제공
  - 에러 처리 및 사용자 안내

**[MVP 우선순위 제안]**

**Phase 1 (핵심 기능):**
- User: 회원가입, 로그인, 기본정보 입력
- Asset: 본인/배우자 자산정보 입력 및 조회
- Housing: 입주희망 주택 입력 및 조회
- Calculator: 입주 후 지출 계산

**Phase 2 (차별화 기능):**
- Housing: 최종목표 주택 선택
- Roadmap: 생애주기 이벤트 입력, AI 로드맵 설계

**Phase 3 (편의 기능):**
- Loan: 대출상품 관리
- Calculator: 계산 결과 히스토리
- Roadmap: 로드맵 수정 및 공유

**[결론]**
전체적으로 **실현 가능한 프로젝트**이며, 특히 AI 기반 로드맵 설계 기능이 핵심 차별화 요소입니다. 다만 다음 사항에 주의가 필요합니다:

1. **재무 계산 정확도**: 전문가 검증 필수
2. **AI 로드맵 품질**: 프롬프트 엔지니어링과 반복 개선 필요
3. **서비스 간 데이터 일관성**: 이벤트 기반 아키텍처 설계
4. **사용자 경험**: 복잡한 입력 폼의 직관적 UI/UX 설계

단계별 개발 접근을 통해 핵심 기능부터 검증하고, AI 기능은 충분한 테스트와 피드백을 거쳐 고도화하는 전략을 권장합니다.
